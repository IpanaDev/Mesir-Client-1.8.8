package ipana.modules.exploit;

import ipana.events.EventPacketReceive;
import ipana.managements.module.Category;
import ipana.managements.module.Module;
import ipana.managements.value.values.BoolValue;
import ipana.utils.player.PlayerUtils;
import net.minecraft.network.play.server.S08PacketPlayerPosLook;
import org.lwjgl.input.Keyboard;

import pisi.unitedmeows.eventapi.event.listener.Listener;

import java.util.Objects;

public class NoRotate extends Module {
    public NoRotate() {
        super("NoRotate", Keyboard.CHAR_NONE, Category.Exploit,"No server-side rotations.");
    }
    public BoolValue silent = new BoolValue("Silent", this, true, "Silent 1 tick rotation.");

    private Listener<EventPacketReceive> receive = new Listener<EventPacketReceive>(event -> {
        S08PacketPlayerPosLook packet = (S08PacketPlayerPosLook) event.getPacket();

        if (packet != null && mc.thePlayer != null && !silent.getValue() && event.getState() == EventPacketReceive.PacketState.PRE) {
            packet.yaw = mc.thePlayer.rotationYaw;
            packet.pitch = mc.thePlayer.rotationPitch;
        }
    }).filter(filter -> filter.getPacket() != null && filter.getPacket() instanceof S08PacketPlayerPosLook);
}